#include <stdio.h>
#include <stdlib.h>

int main() {
    int pass;
    int balance = 1000;
    int amt, try = 0;
    int deposit, withdraw, operation;

    printf("-----Welcome to ATM-----\n");

    do {
        printf("Please enter your password: ");
        scanf("%d", &pass);

        if (pass == 1234) {
            printf("Access Granted\n");

            do {
                printf("Select the operation:\n 1. Withdraw\n 2. Deposit\n 3. Balance\n 4. Exit\n");
                scanf("%d", &operation);

                switch (operation) {
                    case 1:
                        printf("Enter the amount you want to withdraw: ");
                        scanf("%d", &amt);
                        if (amt <= balance) {
                            balance -= amt;
                            printf("Please collect your cash %d\n", amt);
                            printf("Your balance is %d\n", balance);
                        } else {
                            printf("Insufficient balance!\n");
                        }
                        break;

                    case 2:
                        printf("Enter the amount you want to deposit: ");
                        scanf("%d", &deposit);
                        balance += deposit;
                        printf("Balance = %d\n", balance);
                        break;

                    case 3:
                        printf("Your balance is %d\n", balance);
                        break;

                    case 4:
                        printf("Exiting...\n");
                        return 0;

                    default:
                        printf("Invalid option! Try again.\n");
                }
            } while (1); // Keep allowing operations until user exits
        } else {
            printf("Incorrect password!\n");
            try++;
        }
    } while (try < 3);

    if (try == 3) {
        printf("Too many incorrect attempts. Access denied.\n");
    }

    return 0;
}
